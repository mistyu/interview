# 从输入 URL 到页面展示发生了什么

## 从输入 URL 到页面展示发生了什么
1. 判断用户的输入，如果不是 url，则会调用浏览器的搜索引擎进行搜索，是 url 的话就会先调用 beforeLoad 事件，开始导航
2. 查看资源是否有无缓存，有缓存就用缓存，没有就发起请求
3. DNS 解析，浏览器缓存（10ms），host 文件，域名服务器，获取到 ip 地址
4. TCP 连接，三次握手，HTTPS加密解密
5. 网关，负载均衡 返回资源
6. 浏览器根据资源响应头处理资源，不如 Content-Type，重定向，connection: keep-alive 来决定是否四次挥手断开TCP连接等
7. 如果是通过 window.open 打开的新页面并且是打开的页面域名一致的话那么浏览器就会复用渲染进程，可以共享 js 环境
8. 网络进程和渲染进程建立通道，将返回的 HTML 传输给渲染进程
9. 传输完成后，渲染进程告诉主进程，主进程更新导航栏状态，历史栈等
10. 渲染进程查看 HTML，如果有 preload，dns-prefetch 等属性会优先处理 
11. 然后从上到下解析，构建 DOM 树，遇到 CSS 样式表会异步下载，之后构建 CSSOM 树
12. 解析过程遇到不带有 async defer 的 script 时，是会阻止 dom 解析，async 是异步加载 js 然后加载完执行 js 会阻止 dom 解析
13. 将 DOM 树和 CSSOM 树结合，生成 render 树
14. 将 dom 节点布局到正确的位置上
15. 绘制图层树，栅格化将图块转化成位图，最后生成页面到浏览器页面上